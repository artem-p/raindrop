(this.webpackJsonpraindrop=this.webpackJsonpraindrop||[]).push([[0],{111:function(e,n,o){},112:function(e,n,o){},219:function(e,n,o){},220:function(e,n,o){"use strict";o.r(n);var c=o(0),i=o(1),t=o.n(i),a=o(72),l=o.n(a),r=(o(84),o(13)),s=o.n(r),d=o(27),b=o(7),u=(o(86),o(87),o(8)),h=(o(88),o(89),o(77));var j=function(e){var n=e.handleLocation,o=e.status,i=e.lat,t=e.lon,a=e.name;return Object(c.jsxs)("div",{className:"location",children:[Object(c.jsx)("div",{className:"location-button",children:Object(c.jsx)(h.a,{onClick:n})}),Object(c.jsxs)("div",{className:"location-info",children:[o&&Object(c.jsx)("p",{children:o}),i&&Object(c.jsx)("span",{children:i}),t&&Object(c.jsxs)("span",{children:[", ",t]}),a&&Object(c.jsx)("p",{children:a})]})]})};var _,v=function(e){var n=e.handleLocation,o=e.status,t=e.lat,a=e.lon,l=e.name,r=Object(i.useState)(new u.DateTime.local),s=Object(b.a)(r,2),d=s[0],h=s[1];return Object(i.useEffect)((function(){var e=setInterval((function(){return h(u.DateTime.local())}),1e3);return function(){clearInterval(e)}}),[]),Object(c.jsxs)("div",{className:"header-container",children:[Object(c.jsx)("div",{className:"location-container",children:Object(c.jsx)(j,{handleLocation:n,status:o,lat:t,lon:a,name:l})}),Object(c.jsxs)("div",{className:"datetime",children:[Object(c.jsx)("h1",{className:"datetime__time",children:d.toLocaleString(u.DateTime.TIME_SIMPLE)}),Object(c.jsx)("h1",{className:"datetime__date",children:d.toLocaleString(u.DateTime.DATE_MED_WITH_WEEKDAY)})]})]})},m=(o(43),o(90),o(91),o(2)),O=(_={200:{label:"thunderstorm with light rain",icon:"storm-showers",icon_code:"\uf010",icon_night:"night-alt-storm-showers",icon_code_night:"\uf02c"},201:{label:"thunderstorm with rain",icon:"storm-showers",icon_code:"\uf010",icon_night:"",icon_code_night:""},202:{label:"thunderstorm with heavy rain",icon:"storm-showers",icon_code:"\uf010",icon_night:"",icon_code_night:""},210:{label:"light thunderstorm",icon:"storm-showers",icon_code:"\uf016",icon_night:"",icon_code_night:""},211:{label:"thunderstorm",icon:"thunderstorm",icon_code:"\uf016",icon_night:"",icon_code_night:""},212:{label:"heavy thunderstorm",icon:"thunderstorm",icon_code:"\uf016",icon_night:"",icon_code_night:""},221:{label:"ragged thunderstorm",icon:"thunderstorm",icon_code:"\uf016",icon_night:"",icon_code_night:""},230:{label:"thunderstorm with light drizzle",icon:"storm-showers",icon_code:"\uf01e",icon_night:"",icon_code_night:""},231:{label:"thunderstorm with drizzle",icon:"storm-showers",icon_code:"\uf01e"},232:{label:"thunderstorm with heavy drizzle",icon:"storm-showers",icon_code:"\uf01e"},300:{label:"light intensity drizzle",icon:"sprinkle",icon_code:"\uf01c"},301:{label:"drizzle",icon:"sprinkle",icon_code:"\uf01c"},302:{label:"heavy intensity drizzle",icon:"sprinkle",icon_code:"\uf019"},310:{label:"light intensity drizzle rain",icon:"sprinkle",icon_code:"\uf017"},311:{label:"drizzle rain",icon:"sprinkle",icon_code:"\uf019"},312:{label:"heavy intensity drizzle rain",icon:"sprinkle",icon_code:"\uf019"},313:{label:"shower rain and drizzle",icon:"sprinkle",icon_code:"\uf01a"},314:{label:"heavy shower rain and drizzle",icon:"sprinkle",icon_code:"\uf019"},321:{label:"shower drizzle",icon:"sprinkle",icon_code:"\uf01c"}},Object(m.a)(_,"321",{label:"shower drizzle",icon:"sprinkle",icon_code:"\uf01c"}),Object(m.a)(_,"500",{label:"light rain",icon:"rain",icon_code:"\uf019"}),Object(m.a)(_,"501",{label:"moderate rain",icon:"rain",icon_code:"\uf01a"}),Object(m.a)(_,"502",{label:"heavy intensity rain",icon:"rain",icon_code:"\uf01a"}),Object(m.a)(_,"503",{label:"very heavy rain",icon:"rain",icon_code:"\uf01a"}),Object(m.a)(_,"504",{label:"extreme rain",icon:"rain",icon_code:"\uf01a"}),Object(m.a)(_,"511",{label:"freezing rain",icon:"rain-mix",icon_code:"\uf017"}),Object(m.a)(_,"520",{label:"light intensity shower rain",icon:"showers",icon_code:"\uf01a"}),Object(m.a)(_,"521",{label:"shower rain",icon:"showers",icon_code:"\uf01a"}),Object(m.a)(_,"522",{label:"heavy intensity shower rain",icon:"showers",icon_code:"\uf01a"}),Object(m.a)(_,"531",{label:"ragged shower rain",icon:"showers",icon_code:"\uf01d"}),Object(m.a)(_,"600",{label:"light snow",icon:"snow",icon_code:"\uf01b"}),Object(m.a)(_,"601",{label:"snow",icon:"snow",icon_code:"\uf01b"}),Object(m.a)(_,"602",{label:"heavy snow",icon:"snow",icon_code:"\uf0b5"}),Object(m.a)(_,"611",{label:"sleet",icon:"sleet",icon_code:"\uf017"}),Object(m.a)(_,"612",{label:"shower sleet",icon:"sleet",icon_code:"\uf017"}),Object(m.a)(_,"615",{label:"light rain and snow",icon:"rain-mix",icon_code:"\uf017"}),Object(m.a)(_,"616",{label:"rain and snow",icon:"rain-mix",icon_code:"\uf017"}),Object(m.a)(_,"620",{label:"light shower snow",icon:"rain-mix",icon_code:"\uf017"}),Object(m.a)(_,"621",{label:"shower snow",icon:"rain-mix",icon_code:"\uf01b"}),Object(m.a)(_,"622",{label:"heavy shower snow",icon:"rain-mix",icon_code:"\uf01b"}),Object(m.a)(_,"701",{label:"mist",icon:"sprinkle",icon_code:"\uf014"}),Object(m.a)(_,"711",{label:"smoke",icon:"smoke",icon_code:"\uf062"}),Object(m.a)(_,"721",{label:"haze",icon:"day-haze",icon_code:"\uf0b6"}),Object(m.a)(_,"731",{label:"sand, dust whirls",icon:"cloudy-gusts",icon_code:"\uf063"}),Object(m.a)(_,"741",{label:"fog",icon:"fog",icon_code:"\uf014"}),Object(m.a)(_,"751",{label:"sand",icon:"cloudy-gusts",icon_code:"\uf063"}),Object(m.a)(_,"761",{label:"dust",icon:"dust",icon_code:"\uf063"}),Object(m.a)(_,"762",{label:"volcanic ash",icon:"smog",icon_code:"\uf063"}),Object(m.a)(_,"771",{label:"squalls",icon:"day-windy",icon_code:"\uf011"}),Object(m.a)(_,"781",{label:"tornado",icon:"tornado",icon_code:"\uf056"}),Object(m.a)(_,"800",{label:"clear sky",icon:"day-sunny",icon_night:"night-clear",icon_code:"\uf00d",icon_code_night:"\uf02e"}),Object(m.a)(_,"801",{label:"few clouds",icon:"day-cloudy",icon_code:"\uf002",icon_night:"night-alt-cloudy",icon_code_night:"\uf086"}),Object(m.a)(_,"802",{label:"scattered clouds",icon:"cloudy",icon_code:"\uf002",icon_night:"night-alt-cloudy",icon_code_night:"\uf086"}),Object(m.a)(_,"803",{label:"broken clouds",icon:"cloudy",icon_code:"\uf013"}),Object(m.a)(_,"804",{label:"overcast clouds",icon:"cloudy",icon_code:"\uf013"}),Object(m.a)(_,"900",{label:"tornado",icon:"tornado",icon_code:"\uf056"}),Object(m.a)(_,"901",{label:"tropical storm",icon:"hurricane",icon_code:"\uf01d"}),Object(m.a)(_,"902",{label:"hurricane",icon:"hurricane",icon_code:"\uf073"}),Object(m.a)(_,"903",{label:"cold",icon:"snowflake-cold",icon_code:"\uf076"}),Object(m.a)(_,"904",{label:"hot",icon:"hot",icon_code:"\uf072"}),Object(m.a)(_,"905",{label:"windy",icon:"windy",icon_code:"\uf021"}),Object(m.a)(_,"906",{label:"hail",icon:"hail",icon_code:"\uf015"}),Object(m.a)(_,"951",{label:"calm",icon:"sunny",icon_code:"\uf00d"}),Object(m.a)(_,"952",{label:"light breeze",icon:"cloudy-gusts",icon_code:"\uf063"}),Object(m.a)(_,"953",{label:"gentle breeze",icon:"cloudy-gusts",icon_code:"\uf063"}),Object(m.a)(_,"954",{label:"moderate breeze",icon:"cloudy-gusts",icon_code:"\uf063"}),Object(m.a)(_,"955",{label:"fresh breeze",icon:"cloudy-gusts",icon_code:"\uf063"}),Object(m.a)(_,"956",{label:"strong breeze",icon:"cloudy-gusts",icon_code:"\uf063"}),Object(m.a)(_,"957",{label:"high wind, near gale",icon:"cloudy-gusts",icon_code:"\uf050"}),Object(m.a)(_,"958",{label:"gale",icon:"cloudy-gusts",icon_code:"\uf063"}),Object(m.a)(_,"959",{label:"severe gale",icon:"cloudy-gusts",icon_code:"\uf063"}),Object(m.a)(_,"960",{label:"storm",icon:"thunderstorm",icon_code:"\uf016"}),Object(m.a)(_,"961",{label:"violent storm",icon:"thunderstorm",icon_code:"\uf016"}),Object(m.a)(_,"962",{label:"hurricane",icon:"cloudy-gusts",icon_code:"\uf063"}),_),w=O;var g=function(e){var n=e.weatherCode,o=e.isDay,i="";n&&(i=w[n].icon,[800,801,802].includes(n)&&(o||(i=w[n].icon_night)));var t="wi wi-"+i;return Object(c.jsx)("div",{className:"WeatherIcon",children:Object(c.jsx)("i",{className:t})})};var p=function(e){var n=e.weatherCode,o=e.weatherText,i=e.temp,t=e.feelsLike,a=e.isDay;return Object(c.jsxs)("div",{className:"weather",children:[Object(c.jsx)("div",{className:"weather__icon",children:Object(c.jsx)(g,{className:"weather__icon",weatherCode:n,isDay:a})}),Object(c.jsxs)("div",{className:"temperature__measured",children:[i?(i-273.15).toFixed(0):""," "," "," \xb0\u0421"]}),Object(c.jsx)("div",{className:"weather__text",children:o}),Object(c.jsxs)("div",{className:"temperature__feelslike",children:["Feels like ",t?(t-273.15).toFixed(0):""," ","\xb0\u0421"]})]})};o(92),o(93);var f=function(e){var n=e.dir,o=e.speed;return Object(c.jsxs)("div",{className:"wind",children:[Object(c.jsx)("div",{className:"wind__icon",children:Object(c.jsx)("i",{className:"wi wi-wind from-".concat(n,"-deg")})}),Object(c.jsxs)("div",{className:"wind__speed",children:[null===o||void 0===o?void 0:o.toFixed(0)," \u043c/\u0441"]})]})},y=o(73),x=o.n(y).a.create({baseURL:"https://api.openweathermap.org/data/2.5"}),z="3a7c9da63552f741f703b56817b3e594",k={fetchCurrentWeather:function(e,n){return"weather?lat=".concat(e,"&lon=").concat(n,"&appid=").concat(z)},fetchForecast:"forecast?q=".concat("Saint Petersburg, ru","&appid=").concat(z)},N=(o(111),o(78)),I=(o(112),o(74)),C=o.p+"static/media/wi-cloud.55d92a74.svg";o(15),o(218);var D=function(e){var n=e.forecast,o=[],i=[],t=[],a=[];if(new Image(64,64).src=C,n&&n.list&&n.list.length>0){var l=n.list.slice(0,9);o=l.map((function(e){return{x:new Date(1e3*e.dt),y:(e.main.temp-273.15).toFixed(1)}})),a=l.map((function(e){return(e.rain?e.rain["3h"]:0)+(e.snow?e.snow["3h"]:0)})),i=l.map((function(e){var n=(e.rain?e.rain["3h"]:0)+(e.snow?e.snow["3h"]:0);return{x:new Date(1e3*e.dt),y:n}})),t=l.map((function(e){var n,o,c=function(e,n){return n&&"n"==n&&O[e].icon_code_night?O[e].icon_code_night:O[e].icon_code}(null===(n=e.weather[0])||void 0===n?void 0:n.id,null===(o=e.sys)||void 0===o?void 0:o.pod);return{x:new Date(1e3*e.dt),y:0,owmIconCode:c}}))}var r={datasets:[{yAxisID:"weather",data:t,type:"scatter",backgroundColor:"white",pointRadius:0,datalabels:{display:!0,color:"white",font:{family:"WeatherIcons",size:30},formatter:function(e,n){return console.log(e),e.owmIconCode?e.owmIconCode:""}}},{yAxisID:"temp",data:o,borderColor:"white"},{yAxisID:"prec",data:i,type:"bar",backgroundColor:"#004e89"}]},s={responsive:!0,maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{id:"temp",gridLines:{display:!1},ticks:{fontColor:"white",stepSize:2,fontSize:16}},{id:"prec",position:"right",gridLines:{display:!1},ticks:{max:Math.max(1,Math.max.apply(Math,Object(N.a)(a))),fontColor:"white"}},{id:"weather",display:!1}],xAxes:[{type:"time",time:{unit:"hour",tooltipFormat:"lll",unitStepSize:3},gridLines:{display:!1},ticks:{fontColor:"white",fontSize:16}}]},plugins:{datalabels:{display:!1}}};return Object(c.jsx)("div",{className:"forecast-chart",children:Object(c.jsx)(I.a,{data:r,options:s})})};o(219);var S=function(){var e=Object(i.useState)({}),n=Object(b.a)(e,2),o=n[0],t=n[1];return Object(i.useEffect)((function(){function e(){return n.apply(this,arguments)}function n(){return(n=Object(d.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get(k.fetchForecast);case 2:n=e.sent,console.log(n.data),t(n.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e();var o=setInterval(e,3e5);return function(){return clearInterval(o)}}),[]),Object(c.jsx)(D,{forecast:o})};var L=function(){var e,n,o,t,a,l,r,u,h=Object(i.useState)({}),j=Object(b.a)(h,2),_=j[0],m=j[1],O=Object(i.useState)(59.9311),w=Object(b.a)(O,2),g=w[0],y=w[1],z=Object(i.useState)(30.3609),N=Object(b.a)(z,2),I=N[0],C=N[1],D=Object(i.useState)(null),L=Object(b.a)(D,2),E=L[0],T=L[1];function A(e,n){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(s.a.mark((function e(n,o){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get(k.fetchCurrentWeather(n,o));case 2:c=e.sent,m(c.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){A(g,I);var e=setInterval(A,3e5,g,I);return function(){return clearInterval(e)}}),[g,I]),Object(c.jsx)("div",{className:"app",children:Object(c.jsxs)("div",{className:"content",children:[Object(c.jsxs)("div",{className:"content__top",children:[Object(c.jsx)(v,{handleLocation:function(){navigator.geolocation?(T("Locating..."),navigator.geolocation.getCurrentPosition((function(e){T(null);var n=e.coords.latitude,o=e.coords.longitude;y(n),C(o)}),(function(){T("Unable to retrieve your location")}))):T("Geolocation is not supported by your browser")},status:E,lat:g,lon:I,name:null===_||void 0===_?void 0:_.name}),Object(c.jsx)("div",{className:"weather__state",children:Object(c.jsx)(p,{weatherCode:(null===_||void 0===_?void 0:_.weather)?null===_||void 0===_||null===(e=_.weather[0])||void 0===e?void 0:e.id:null,weatherText:(null===_||void 0===_?void 0:_.weather)?null===_||void 0===_||null===(n=_.weather[0])||void 0===n?void 0:n.description:"",temp:null===_||void 0===_||null===(o=_.main)||void 0===o?void 0:o.temp,feelsLike:null===_||void 0===_||null===(t=_.main)||void 0===t?void 0:t.feels_like,isDay:(null===_||void 0===_||null===(a=_.sys)||void 0===a?void 0:a.sunrise)<=(null===_||void 0===_?void 0:_.dt)&&(null===_||void 0===_?void 0:_.dt)<(null===_||void 0===_||null===(l=_.sys)||void 0===l?void 0:l.sunset)})}),Object(c.jsx)(f,{dir:null===_||void 0===_||null===(r=_.wind)||void 0===r?void 0:r.deg,speed:null===_||void 0===_||null===(u=_.wind)||void 0===u?void 0:u.speed})]}),Object(c.jsx)("div",{className:"content__bottom",children:Object(c.jsx)(S,{})})]})})};l.a.render(Object(c.jsx)(t.a.StrictMode,{children:Object(c.jsx)(L,{})}),document.getElementById("root"))},43:function(e,n,o){},84:function(e,n,o){},87:function(e,n,o){},88:function(e,n,o){},89:function(e,n,o){},90:function(e,n,o){},91:function(e,n,o){},92:function(e,n,o){},93:function(e,n,o){}},[[220,1,2]]]);
//# sourceMappingURL=main.5fc7c398.chunk.js.map