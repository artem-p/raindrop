(this.webpackJsonpraindrop=this.webpackJsonpraindrop||[]).push([[0],{100:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},147:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(38),i=n.n(r),s=n(43),l=n(9),o=(n(98),n(99),n(100),n(1));var d=function(){return Object(o.jsxs)("div",{className:"app",children:[Object(o.jsx)("header",{children:Object(o.jsxs)("nav",{className:"nav",children:[Object(o.jsx)(s.b,{to:"/raindrop/dashboard",children:"Dashboard"}),Object(o.jsx)(s.b,{to:"/raindrop/map",children:"Map"})]})}),Object(o.jsx)("main",{children:Object(o.jsx)(l.b,{})})]})},j=n(6),u=n(25),h=(n(102),n(103),n(85));var b=function(e){var t=e.handleLocation,n=e.status,a=e.lat,c=e.lon,r=e.name;return Object(o.jsxs)("div",{className:"location",children:[Object(o.jsx)("div",{className:"location-button",children:Object(o.jsx)(h.a,{onClick:t})}),Object(o.jsxs)("div",{className:"location-info",children:[n&&Object(o.jsx)("p",{children:n}),a&&Object(o.jsx)("span",{children:a}),c&&Object(o.jsxs)("span",{children:[", ",c]}),r&&Object(o.jsx)("p",{children:r})]})]})},v=n(83);var m=function(e){var t=e.handleLocation,n=e.handleSelectPlace,c=e.status,r=e.lat,i=e.lon,s=e.name,l=Object(a.useState)(new u.DateTime.local),d=Object(j.a)(l,2),h=d[0],m=d[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return m(u.DateTime.local())}),1e3);return function(){clearInterval(e)}}),[]),Object(o.jsxs)("div",{className:"header-container",children:[Object(o.jsx)("div",{className:"location-container",children:Object(o.jsx)(b,{handleLocation:t,status:c,lat:r,lon:i,name:s})}),Object(o.jsx)("div",{className:"search-box",children:Object(o.jsx)(v.a,{inputPlaceholder:"Search for location",accessToken:"pk.eyJ1IjoiYXJ0ZW1wdWdhY2hldiIsImEiOiJja3l1NWJwZ3owM2IxMnd0NDUydDZqazUyIn0.b1G2XUsJEhO49s7vTH2q1Q",onSelect:n,showLoader:!0})}),Object(o.jsxs)("div",{className:"datetime",children:[Object(o.jsx)("h1",{className:"datetime__time",children:h.toLocaleString(u.DateTime.TIME_SIMPLE)}),Object(o.jsx)("h1",{className:"datetime__date",children:h.toLocaleString(u.DateTime.DATE_MED_WITH_WEEKDAY)})]})]})},O=n(35),f=n(27),x=n.n(f),p="3a7c9da63552f741f703b56817b3e594",w={fetchCurrentWeather:function(e,t){return"weather?lat=".concat(e,"&lon=").concat(t,"&appid=").concat(p)},fetchForecast:function(e,t){return"forecast?lat=".concat(e,"&lon=").concat(t,"&appid=").concat(p)},fetchDailyForecast:function(e,t){return"onecall?lat=".concat(e,"&lon=").concat(t,"&exclude=current,hourly,alerts&appid=").concat(p)},fetchRadarData:"https://api.rainviewer.com/public/weather-maps.json"},N=n(82),g=n.n(N).a.create({baseURL:"https://api.openweathermap.org/data/2.5"}),y=n(181),S=n(182),I=n(183);n(139),n(71);var E=function(e){var t=e.weatherCode,n=e.isNight,a="";if(t){var c="";c=t,n&&[800,801,802].includes(t)&&(c="-night-"+t),a="wi wi-owm-"+c}return Object(o.jsx)("div",{children:Object(o.jsx)("i",{className:a})})};function D(e){return e?(e-273.15).toFixed(0):""}n(140),n(141);var T=function(e){var t,n=e.wind,a=null!==n&&void 0!==n&&n.speed?null===n||void 0===n||null===(t=n.speed)||void 0===t?void 0:t.toFixed(0):0,c=null!==n&&void 0!==n&&n.deg?null===n||void 0===n?void 0:n.deg:0,r="wi wi-wind from-".concat(c,"-deg");return Object(o.jsxs)("div",{className:"wind",children:[Object(o.jsx)("i",{className:r})," ",Object(o.jsxs)("span",{children:[a," \u043c/c"]})]})};var _=function(e){var t,n,c,r,i=e.lat,s=e.lon,l=e.place,d=Object(a.useState)({}),u=Object(j.a)(d,2),h=u[0],b=u[1];function v(e,t){return m.apply(this,arguments)}function m(){return m=Object(O.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get(w.fetchCurrentWeather(t,n));case 2:a=e.sent,b(a.data);case 4:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}Object(a.useEffect)((function(){v(i,s);var e=setInterval(v,3e5,i,s);return function(){return clearInterval(e)}}),[i,s]);var f=null!==h&&void 0!==h&&h.name?null===h||void 0===h?void 0:h.name:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",p=null!==h&&void 0!==h&&h.weather?null===h||void 0===h||null===(t=h.weather[0])||void 0===t?void 0:t.description:"",N=null!==h&&void 0!==h&&h.weather?null===h||void 0===h||null===(n=h.weather[0])||void 0===n?void 0:n.id:"",_=D(null===h||void 0===h||null===(c=h.main)||void 0===c?void 0:c.temp),L=(D(null===h||void 0===h||null===(r=h.main)||void 0===r?void 0:r.feels_like),null===h||void 0===h?void 0:h.wind);return Object(o.jsx)("div",{className:"weather-card owm-current-weather",children:Object(o.jsx)(y.a,{fluid:!0,children:Object(o.jsx)(S.a,{children:Object(o.jsxs)(I.a,{children:[Object(o.jsx)(S.a,{children:Object(o.jsx)(I.a,{children:Object(o.jsxs)("div",{className:"station-name",children:[l," ",f]})})}),Object(o.jsxs)(S.a,{children:[Object(o.jsx)(I.a,{children:Object(o.jsx)("div",{className:"weather-icon",children:Object(o.jsx)(E,{weatherCode:N})})}),Object(o.jsx)(I.a,{children:Object(o.jsxs)("div",{className:"temperature__measured",children:[_," "," ",Object(o.jsx)("sup",{children:"\xb0"})]})})]}),Object(o.jsxs)(S.a,{children:[Object(o.jsx)(I.a,{children:Object(o.jsx)("div",{className:"weather-text",children:Object(o.jsx)("h6",{children:p})})}),Object(o.jsx)(I.a,{children:Object(o.jsx)(T,{wind:L})})]})]})})})})};n(142),n(143);var L=function(e){var t=e.time,n=e.temp,a=e.weatherCode;return Object(o.jsxs)("div",{className:"forecast-element",children:[Object(o.jsx)("div",{className:"forecast-element_icon",children:Object(o.jsx)(E,{weatherCode:a})}),Object(o.jsx)("div",{className:"forecast-element_time",children:u.DateTime.fromSeconds(t).toLocaleString(u.DateTime.TIME_SIMPLE)}),Object(o.jsxs)("div",{className:"forecast-element_temperature",children:[n?(n-273.15).toFixed(0):0," ",Object(o.jsx)("sup",{children:"\xb0"})]})]})};var k=function(e){var t=e.lat,n=e.lon,c=Object(a.useState)({}),r=Object(j.a)(c,2),i=r[0],s=r[1];function l(e,t){return d.apply(this,arguments)}function d(){return d=Object(O.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get(w.fetchForecast(t,n));case 2:a=e.sent,s(a.data);case 4:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}return Object(a.useEffect)((function(){l(t,n);var e=setInterval(l,3e5,t,n);return function(){return clearInterval(e)}}),[t,n]),Object(o.jsxs)("div",{className:"weather-card owm-3h-forecast",children:[Object(o.jsx)("h5",{className:"header",children:"\u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u043d\u0430 24 \u0447"}),Object(o.jsx)("div",{className:"forecast-elements",children:function(){if(i&&i.list&&i.list.length>0)return i.list.slice(0,8).map((function(e){var t;return Object(o.jsx)(L,{time:e.dt,temp:e.main.temp,weatherCode:null===e||void 0===e||null===(t=e.weather[0])||void 0===t?void 0:t.id},e.dt)}))}()})]})};n(144),n(145);var C=function(e){var t=e.time,n=e.minTemp,a=e.maxTemp,c=e.weatherCode;return Object(o.jsxs)("div",{className:"forecast-element",children:[Object(o.jsx)("div",{className:"forecast-element_icon",children:Object(o.jsx)(E,{weatherCode:c})}),Object(o.jsx)("div",{className:"forecast-element_time",children:u.DateTime.fromSeconds(t).toLocaleString({weekday:"short"})}),Object(o.jsxs)("div",{className:"forecast-element_temperature",children:[a,Object(o.jsx)("sup",{children:"\xb0"})," / ",n,Object(o.jsx)("sup",{children:"\xb0"})]})]})};var J=function(e){var t=e.lat,n=e.lon,c=Object(a.useState)({}),r=Object(j.a)(c,2),i=r[0],s=r[1];function l(e,t){return d.apply(this,arguments)}function d(){return d=Object(O.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get(w.fetchDailyForecast(t,n));case 2:a=e.sent,s(a.data);case 4:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}return Object(a.useEffect)((function(){l(t,n);var e=setInterval(l,3e5,t,n);return function(){return clearInterval(e)}}),[t,n]),Object(o.jsxs)("div",{className:"weather-card owm-daily-forecast",children:[Object(o.jsx)("h5",{className:"header",children:"\u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u043d\u0430 5 \u0434\u043d\u0435\u0439"}),Object(o.jsx)("div",{className:"forecast-elements",children:function(){if(i&&i.daily&&i.daily.length>0)return i.daily.slice(0,5).map((function(e){var t;return Object(o.jsx)(C,{time:e.dt,minTemp:D(e.temp.min),maxTemp:D(e.temp.max),weatherCode:null===e||void 0===e||null===(t=e.weather[0])||void 0===t?void 0:t.id},e.dt)}))}()})]})};var M=function(){var e=Object(a.useState)(59.9311),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(30.3609),i=Object(j.a)(r,2),s=i[0],l=i[1],d=Object(a.useState)(null),u=Object(j.a)(d,2),h=u[0],b=u[1],v=Object(a.useState)(""),O=Object(j.a)(v,2),f=O[0],x=O[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)(m,{handleLocation:function(){x(""),navigator.geolocation?(b("Locating..."),navigator.geolocation.getCurrentPosition((function(e){b(null);var t=e.coords.latitude,n=e.coords.longitude;c(t),l(n)}),(function(){b("Unable to retrieve your location")}))):b("Geolocation is not supported by your browser")},handleSelectPlace:function(e){c(null===e||void 0===e?void 0:e.center[1]),l(null===e||void 0===e?void 0:e.center[0]),x(null===e||void 0===e?void 0:e.text)},status:h,lat:n,lon:s}),Object(o.jsx)(_,{lat:n,lon:s,place:f}),Object(o.jsx)(k,{lat:n,lon:s}),Object(o.jsx)(J,{lat:n,lon:s})]})},W=(n(146),n(59)),P=n.n(W),U=n(184);n(147);P.a.accessToken="pk.eyJ1IjoiYXJ0ZW1wdWdhY2hldiIsImEiOiJja3l1NWJwZ3owM2IxMnd0NDUydDZqazUyIn0.b1G2XUsJEhO49s7vTH2q1Q";var z=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useState)(30),c=Object(j.a)(n,2),r=c[0],i=(c[1],Object(a.useState)(59.9)),s=Object(j.a)(i,2),l=s[0],d=(s[1],Object(a.useState)(6)),u=Object(j.a)(d,2),h=u[0],b=(u[1],Object(a.useState)([])),v=Object(j.a)(b,2),m=v[0],O=v[1],f=Object(a.useState)(0),x=Object(j.a)(f,2),p=x[0],N=x[1];Object(a.useEffect)((function(){fetch(w.fetchRadarData).then((function(e){return e.json()})).then((function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.radar)&&void 0!==t&&t.past){var n=e.radar.past;O(n),n.length>0&&N(n[n.length-1].time)}}))}),[]),Object(a.useEffect)((function(){t.current||(t.current=new P.a.Map({container:e.current,style:"mapbox://styles/mapbox/satellite-streets-v11",center:[r,l],zoom:h}))})),Object(a.useEffect)((function(){if(m&&0!==m.length){var e=m[m.length-1].path;t.current.on("load",(function(){t.current.addLayer({id:"precipitation",type:"raster",source:{type:"raster",tiles:["https://tilecache.rainviewer.com/".concat(e,"/512/{z}/{x}/{y}/1/1_0.png")],tileSize:256},minzoom:0,maxzoom:22}),t.current.setPaintProperty("precipitation","raster-opacity",1)}))}}),[m]);var g=function(){return m&&(null===m||void 0===m?void 0:m.length)>0?m[m.length-1].time:0};return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{id:"map",children:Object(o.jsx)("div",{ref:e,className:"map-container"})}),Object(o.jsx)("div",{className:"bottom-controls",children:Object(o.jsx)(U.a,{value:p,defaultValue:g(),onChange:function(e,t){N(t)},marks:!0,min:m&&(null===m||void 0===m?void 0:m.length)>0?m[0].time:0,max:g(),step:600})})]})};i.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(s.a,{children:Object(o.jsxs)(l.e,{children:[Object(o.jsx)(l.c,{exact:!0,path:"/raindrop",element:Object(o.jsx)(l.a,{to:"/raindrop/dashboard"})}),Object(o.jsxs)(l.c,{path:"/raindrop",element:Object(o.jsx)(d,{}),children:[Object(o.jsx)(l.c,{path:"dashboard",element:Object(o.jsx)(M,{})}),Object(o.jsx)(l.c,{path:"map",element:Object(o.jsx)(z,{})})]})]})})}),document.getElementById("root"))},71:function(e,t,n){},98:function(e,t,n){}},[[149,1,2]]]);
//# sourceMappingURL=main.6bb65285.chunk.js.map