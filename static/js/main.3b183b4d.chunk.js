(this.webpackJsonpraindrop=this.webpackJsonpraindrop||[]).push([[0],{287:function(e,t,n){},572:function(e,t,n){},574:function(e,t,n){},576:function(e,t,n){},577:function(e,t,n){},611:function(e,t,n){},612:function(e,t,n){},613:function(e,t,n){},614:function(e,t,n){},615:function(e,t,n){},616:function(e,t,n){},617:function(e,t,n){},619:function(e,t,n){},621:function(e,t,n){"use strict";n.r(t);n(310),n(369);var a=n(0),c=n.n(a),r=n(107),i=n.n(r),s=n(130),l=n(15),o=(n(572),n(573),n(574),n(1));var d=n(11),u=n(64),j=(n(576),n(577),n(301));var h=function(e){var t=e.handleLocation,n=e.status,a=e.lat,c=e.lon,r=e.name;return Object(o.jsxs)("div",{className:"location",children:[Object(o.jsx)("div",{className:"location-button",children:Object(o.jsx)(j.a,{onClick:t})}),Object(o.jsxs)("div",{className:"location-info",children:[n&&Object(o.jsx)("p",{children:n}),a&&Object(o.jsx)("span",{children:a}),c&&Object(o.jsxs)("span",{children:[", ",c]}),r&&Object(o.jsx)("p",{children:r})]})]})},b=n(299);var v=function(e){var t=e.handleLocation,n=e.handleSelectPlace,c=e.status,r=e.lat,i=e.lon,s=e.name,l=Object(a.useState)(new u.DateTime.local),j=Object(d.a)(l,2),v=j[0],m=j[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return m(u.DateTime.local())}),1e3);return function(){clearInterval(e)}}),[]),Object(o.jsxs)("div",{className:"header-container",children:[Object(o.jsx)("div",{className:"location-container",children:Object(o.jsx)(h,{handleLocation:t,status:c,lat:r,lon:i,name:s})}),Object(o.jsx)("div",{className:"search-box",children:Object(o.jsx)(b.a,{inputPlaceholder:"Search for location",accessToken:"pk.eyJ1IjoiYXJ0ZW1wdWdhY2hldiIsImEiOiJja3l1NWJwZ3owM2IxMnd0NDUydDZqazUyIn0.b1G2XUsJEhO49s7vTH2q1Q",onSelect:n,showLoader:!0})}),Object(o.jsxs)("div",{className:"datetime",children:[Object(o.jsx)("h1",{className:"datetime__time",children:v.toLocaleString(u.DateTime.TIME_SIMPLE)}),Object(o.jsx)("h1",{className:"datetime__date",children:v.toLocaleString(u.DateTime.DATE_MED_WITH_WEEKDAY)})]})]})},m=n(104),f=n(69),O=n.n(f),x="3a7c9da63552f741f703b56817b3e594",p={fetchCurrentWeather:function(e,t){return"weather?lat=".concat(e,"&lon=").concat(t,"&appid=").concat(x)},fetchForecast:function(e,t){return"forecast?lat=".concat(e,"&lon=").concat(t,"&appid=").concat(x)},fetchDailyForecast:function(e,t){return"onecall?lat=".concat(e,"&lon=").concat(t,"&exclude=current,hourly,alerts&appid=").concat(x)},fetchRadarData:"https://api.rainviewer.com/public/weather-maps.json"},w=n(298),N=n.n(w).a.create({baseURL:"https://api.openweathermap.org/data/2.5"}),g=n(653),y=n(654),S=n(655);n(611),n(287);var I=function(e){var t=e.weatherCode,n=e.isNight,a="";if(t){var c="";c=t,n&&[800,801,802].includes(t)&&(c="-night-"+t),a="wi wi-owm-"+c}return Object(o.jsx)("div",{children:Object(o.jsx)("i",{className:a})})};function E(e){return e?(e-273.15).toFixed(0):""}n(612),n(613);var T=function(e){var t,n=e.wind,a=null!==n&&void 0!==n&&n.speed?null===n||void 0===n||null===(t=n.speed)||void 0===t?void 0:t.toFixed(0):0,c=null!==n&&void 0!==n&&n.deg?null===n||void 0===n?void 0:n.deg:0,r="wi wi-wind from-".concat(c,"-deg");return Object(o.jsxs)("div",{className:"wind",children:[Object(o.jsx)("i",{className:r})," ",Object(o.jsxs)("span",{children:[a," \u043c/c"]})]})};var _=function(e){var t,n,c,r,i=e.lat,s=e.lon,l=e.place,u=Object(a.useState)({}),j=Object(d.a)(u,2),h=j[0],b=j[1];function v(e,t){return f.apply(this,arguments)}function f(){return f=Object(m.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get(p.fetchCurrentWeather(t,n));case 2:a=e.sent,b(a.data);case 4:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}Object(a.useEffect)((function(){v(i,s);var e=setInterval(v,3e5,i,s);return function(){return clearInterval(e)}}),[i,s]);var x=null!==h&&void 0!==h&&h.name?null===h||void 0===h?void 0:h.name:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",w=null!==h&&void 0!==h&&h.weather?null===h||void 0===h||null===(t=h.weather[0])||void 0===t?void 0:t.description:"",_=null!==h&&void 0!==h&&h.weather?null===h||void 0===h||null===(n=h.weather[0])||void 0===n?void 0:n.id:"",D=E(null===h||void 0===h||null===(c=h.main)||void 0===c?void 0:c.temp),L=(E(null===h||void 0===h||null===(r=h.main)||void 0===r?void 0:r.feels_like),null===h||void 0===h?void 0:h.wind);return Object(o.jsx)("div",{className:"weather-card owm-current-weather",children:Object(o.jsx)(g.a,{fluid:!0,children:Object(o.jsx)(y.a,{children:Object(o.jsxs)(S.a,{children:[Object(o.jsx)(y.a,{children:Object(o.jsx)(S.a,{children:Object(o.jsxs)("div",{className:"station-name",children:[l," ",x]})})}),Object(o.jsxs)(y.a,{children:[Object(o.jsx)(S.a,{children:Object(o.jsx)("div",{className:"weather-icon",children:Object(o.jsx)(I,{weatherCode:_})})}),Object(o.jsx)(S.a,{children:Object(o.jsxs)("div",{className:"temperature__measured",children:[D," "," ",Object(o.jsx)("sup",{children:"\xb0"})]})})]}),Object(o.jsxs)(y.a,{children:[Object(o.jsx)(S.a,{children:Object(o.jsx)("div",{className:"weather-text",children:Object(o.jsx)("h6",{children:w})})}),Object(o.jsx)(S.a,{children:Object(o.jsx)(T,{wind:L})})]})]})})})})};n(614),n(615);var D=function(e){var t=e.time,n=e.temp,a=e.weatherCode;return Object(o.jsxs)("div",{className:"forecast-element",children:[Object(o.jsx)("div",{className:"forecast-element_icon",children:Object(o.jsx)(I,{weatherCode:a})}),Object(o.jsx)("div",{className:"forecast-element_time",children:u.DateTime.fromSeconds(t).toLocaleString(u.DateTime.TIME_SIMPLE)}),Object(o.jsxs)("div",{className:"forecast-element_temperature",children:[n?(n-273.15).toFixed(0):0," ",Object(o.jsx)("sup",{children:"\xb0"})]})]})};var L=function(e){var t=e.lat,n=e.lon,c=Object(a.useState)({}),r=Object(d.a)(c,2),i=r[0],s=r[1];function l(e,t){return u.apply(this,arguments)}function u(){return u=Object(m.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get(p.fetchForecast(t,n));case 2:a=e.sent,s(a.data);case 4:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}return Object(a.useEffect)((function(){l(t,n);var e=setInterval(l,3e5,t,n);return function(){return clearInterval(e)}}),[t,n]),Object(o.jsxs)("div",{className:"weather-card owm-3h-forecast",children:[Object(o.jsx)("h5",{className:"header",children:"\u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u043d\u0430 24 \u0447"}),Object(o.jsx)("div",{className:"forecast-elements",children:function(){if(i&&i.list&&i.list.length>0)return i.list.slice(0,8).map((function(e){var t;return Object(o.jsx)(D,{time:e.dt,temp:e.main.temp,weatherCode:null===e||void 0===e||null===(t=e.weather[0])||void 0===t?void 0:t.id},e.dt)}))}()})]})};n(616),n(617);var k=function(e){var t=e.time,n=e.minTemp,a=e.maxTemp,c=e.weatherCode;return Object(o.jsxs)("div",{className:"forecast-element",children:[Object(o.jsx)("div",{className:"forecast-element_icon",children:Object(o.jsx)(I,{weatherCode:c})}),Object(o.jsx)("div",{className:"forecast-element_time",children:u.DateTime.fromSeconds(t).toLocaleString({weekday:"short"})}),Object(o.jsxs)("div",{className:"forecast-element_temperature",children:[a,Object(o.jsx)("sup",{children:"\xb0"})," / ",n,Object(o.jsx)("sup",{children:"\xb0"})]})]})};var C=function(e){var t=e.lat,n=e.lon,c=Object(a.useState)({}),r=Object(d.a)(c,2),i=r[0],s=r[1];function l(e,t){return u.apply(this,arguments)}function u(){return u=Object(m.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get(p.fetchDailyForecast(t,n));case 2:a=e.sent,s(a.data);case 4:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}return Object(a.useEffect)((function(){l(t,n);var e=setInterval(l,3e5,t,n);return function(){return clearInterval(e)}}),[t,n]),Object(o.jsxs)("div",{className:"weather-card owm-daily-forecast",children:[Object(o.jsx)("h5",{className:"header",children:"\u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u043d\u0430 5 \u0434\u043d\u0435\u0439"}),Object(o.jsx)("div",{className:"forecast-elements",children:function(){if(i&&i.daily&&i.daily.length>0)return i.daily.slice(0,5).map((function(e){var t;return Object(o.jsx)(k,{time:e.dt,minTemp:E(e.temp.min),maxTemp:E(e.temp.max),weatherCode:null===e||void 0===e||null===(t=e.weather[0])||void 0===t?void 0:t.id},e.dt)}))}()})]})};var J=function(){var e=Object(a.useState)(59.9311),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(30.3609),i=Object(d.a)(r,2),s=i[0],l=i[1],u=Object(a.useState)(null),j=Object(d.a)(u,2),h=j[0],b=j[1],m=Object(a.useState)(""),f=Object(d.a)(m,2),O=f[0],x=f[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)(v,{handleLocation:function(){x(""),navigator.geolocation?(b("Locating..."),navigator.geolocation.getCurrentPosition((function(e){b(null);var t=e.coords.latitude,n=e.coords.longitude;c(t),l(n)}),(function(){b("Unable to retrieve your location")}))):b("Geolocation is not supported by your browser")},handleSelectPlace:function(e){c(null===e||void 0===e?void 0:e.center[1]),l(null===e||void 0===e?void 0:e.center[0]),x(null===e||void 0===e?void 0:e.text)},status:h,lat:n,lon:s}),Object(o.jsx)(_,{lat:n,lon:s,place:O}),Object(o.jsx)(L,{lat:n,lon:s}),Object(o.jsx)(C,{lat:n,lon:s})]})},M=(n(618),n(197)),W=n.n(M),P=n(656);n(619);W.a.accessToken="pk.eyJ1IjoiYXJ0ZW1wdWdhY2hldiIsImEiOiJja3l1NWJwZ3owM2IxMnd0NDUydDZqazUyIn0.b1G2XUsJEhO49s7vTH2q1Q";var U=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useState)(30),c=Object(d.a)(n,2),r=c[0],i=(c[1],Object(a.useState)(59.9)),s=Object(d.a)(i,2),l=s[0],u=(s[1],Object(a.useState)(6)),j=Object(d.a)(u,2),h=j[0],b=(j[1],Object(a.useState)([])),v=Object(d.a)(b,2),m=v[0],f=v[1],O=Object(a.useState)(0),x=Object(d.a)(O,2),w=x[0],N=x[1];Object(a.useEffect)((function(){fetch(p.fetchRadarData).then((function(e){return e.json()})).then((function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.radar)&&void 0!==t&&t.past){var n=e.radar.past;f(n),n.length>0&&N(n[n.length-1].time)}}))}),[]),Object(a.useEffect)((function(){t.current||(t.current=new W.a.Map({container:e.current,style:"mapbox://styles/mapbox/satellite-streets-v11",center:[r,l],zoom:h}))})),Object(a.useEffect)((function(){if(m&&0!==m.length){var e=m[m.length-1].path;t.current.on("load",(function(){t.current.addLayer({id:"precipitation",type:"raster",source:{type:"raster",tiles:["https://tilecache.rainviewer.com/".concat(e,"/512/{z}/{x}/{y}/1/1_0.png")],tileSize:256},minzoom:0,maxzoom:22}),t.current.setPaintProperty("precipitation","raster-opacity",1)}))}}),[m]);var g=function(){return m&&(null===m||void 0===m?void 0:m.length)>0?m[m.length-1].time:0};return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{id:"map",children:Object(o.jsx)("div",{ref:e,className:"map-container"})}),Object(o.jsx)("div",{className:"bottom-controls",children:Object(o.jsx)(P.a,{value:w,defaultValue:g(),onChange:function(e,t){N(t)},marks:!0,min:m&&(null===m||void 0===m?void 0:m.length)>0?m[0].time:0,max:g(),step:600})})]})};i.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(s.a,{children:Object(o.jsxs)(l.d,{children:[Object(o.jsx)(l.b,{path:"/raindrop",element:Object(o.jsx)(J,{})}),Object(o.jsx)(l.b,{path:"/raindrop/map",element:Object(o.jsx)(U,{})})]})})}),document.getElementById("root"))}},[[621,1,2]]]);
//# sourceMappingURL=main.3b183b4d.chunk.js.map